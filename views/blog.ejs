<!DOCTYPE html>
<html lang="en">
<head>
      <%- include('./partials/head') %>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog</title>
</head>
<body>
     <%- include('./partials/nav') %>


     <div class="container mt-4">
        <h1 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;"><%= blog.title %></h1>
        <img src="<%=blog.coverimage%> " width="500px" height="500px" class="mt-3.5" />
        
        <% 
          var displayBody = blog.body || '';
          // Remove any trailing developer notes or code snippets accidentally pasted into body
          // match multiple possible headings that start dev notes and strip everything after them
          displayBody = displayBody.replace(/(MongoDB Document Structure for Blog Storage|ðŸ’» Code Meets Creativity â€“ Blog Upload Implementation|Code Meets Creativity â€“ Blog Upload Implementation)[\s\S]*/i, '');
          displayBody = displayBody.trim();
        %>
        <pre class="mt-4" style="
        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        white-space: pre-wrap;
        word-wrap: break-word;
        overflow-x: auto;
        max-width: 100%;
             ">
        <%= displayBody %>
          </pre>

        <!-- pre tag basically maintians the spacinf from the original form  -->
     </div>


     <div class="container mt-4">
            <!-- <img src="<%= blog.createdBy.profileimage %>" width="50px"> -->
            <%= blog.createdBy.fullname %>
         </div>


         <div class="container mt-3">
            <h1>Comments</h1>
           
                <% if (locals.user) { %>
                    <div class="d-flex align-items-center mb-2">
                      <img src="<%= locals.user.profileimage %>" width="48" height="48" class="rounded-circle me-2" alt="avatar">
                      <strong><%= locals.user.fullname %></strong>
                    </div>
                    <form action="/blog/comment/<%= blog._id %>" method="post"> 
         <!-- this form action is used so that when we enter the email and pass on the front end then it sends to the given route in the action 
         suppose here route is /user/signin then the sign in route will handle the further procedure -->

          


  <div class="mb-3">
    <input type="text"
     class="form-control"
     name="content"
     placeholder="Enter Your Comments"

      
      >
      <button  type="submit" class="btn btn-sm btn-primary mt-2 ">Add</button>
  </div>

            </form>
                 
                <% } %>
         </div>



         <%- include('./partials/script') %>

         


    
</body>
</html>